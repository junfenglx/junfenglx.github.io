<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta name="author" content="junfeng" />
    <meta name="robots" content="index, follow"/>

    <meta property="og:title" content="C++ link and library usage"/>
    <meta property="og:url" content="http://junfenglx.github.io/c-link-and-library-usage.html"/>
    <meta property="og:site_name" content="jf.h"/>
    <meta property="og:type" content="article"/>

    <link rel="canonical" href="http://junfenglx.github.io/c-link-and-library-usage.html" />
    <link rel="shortcut icon" href="favicon.ico" />

    <title>C++ link and library usage | jf.h</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link href="//netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css" rel="stylesheet">
    <link rel="stylesheet" href="http://junfenglx.github.io/theme/css/bootstrap-combined.min.css" type="text/css" />

    <link rel="stylesheet" href="http://junfenglx.github.io/theme/css/main.css" type="text/css" />
    <link href="http://junfenglx.github.io/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="jf.h Atom Feed" />

</head>

<body id="index">
    <div class="row-fluid">
        <div class="span10 offset1">
            <header id="banner" >
                <h1>
                    <a href="http://junfenglx.github.io/">jf.h
 <h3><strong>lylx</strong></h3>                    </a>
                </h1>
                <nav class="navbar">
                    <div class="navbar-inner">
                        <ul class="nav">
                            <li><a href="/">首页</a></li>
                            <li><a href="http://junfenglx.github.io/pages/about.html">关于我</a></li>
                        </ul>

                    </div>
                </nav>
            </header><!-- /#banner -->
        </div>
    </div>

    <div class="row-fluid">
        <div class="span10 offset1">
            <div class="row-fluid">
<div class="span10 offset1">
  <section>
    <article>
      <header>
        <h1 class="entry-title">
          <a href="http://junfenglx.github.io/c-link-and-library-usage.html" rel="bookmark"
             title="Permalink to C++ link and library usage">C++ link and library usage</a></h1>
      </header>
      <div class="entry-content">
<footer class="post-info">
    <address class="vcard author">
        by <a class="url fn" href="http://junfenglx.github.io/author/junfeng.html">junfeng</a>
    </address>

    in <a href="http://junfenglx.github.io/category/cheng-xu-yuan.html">程序猿</a>

    on 2015-06-28

        |
        tags:         <a href="http://junfenglx.github.io/tag/c.html">C++</a>
        <a href="http://junfenglx.github.io/tag/cmake.html">CMake</a>


        |
        <a href="http://junfenglx.github.io/c-link-and-library-usage.html#disqus_thread">comments</a>

    
</footer><!-- /.post-info -->

        <p>When use a programming language produtively,
We need use third parties libraries.</p>
<p>If we install libraries and header files in
/usr/lib, /usr/local/lib and /usr/include/,
/usr/local/include, compilers will find them automatically.
But when libraries and headers are not in system paths, How
do you tell compilers to find them.</p>
<p>The answer is using compiler flags:</p>
<ul>
<li><code>-I</code> adds headers search paths</li>
<li><code>-L</code> adds lib search paths</li>
<li><code>-l</code> adds lib files, includes dynamic and static libs</li>
<li><code>-Wl,-rpath,shared_path</code> adds shared_path to rpath</li>
</ul>
<p>These flags control compilers how to find libraries you use.
Just like Java's class path.</p>
<p><em>note: when use dynamic link, you should set rpath(RUNTIME SEARCH PATH)</em>
<em>proporly, otherwise when executes, your program would't find shared</em>
<em>libraries not located in system link path.</em></p>
<p>But the above way is a low level approach. More convenient way
is using Makefile with pkg-config tool. pkg-config can read config
files and provides compiler flags about a library.</p>
<p>The most simple way is using CMake, CMake provides many commands to
find the library you are working with, and it is so convenient that
CMake provides lots of varaibles you can add paths for CMake to search.</p>
<p>Some useful commands include:</p>
<ul>
<li><code>include_directories</code>, adds header files search path.</li>
<li><code>find_library</code>, find library files for linking.</li>
<li>some varaibles about rpath:<ul>
<li><code>CMAKE_INSTALL_RPATH</code></li>
<li><code>CMAKE_INSTALL_RPATH_USE_LINK_PATH</code></li>
<li><code>CMAKE_BUILD_WITH_INSTALL_RPATH</code></li>
</ul>
</li>
</ul>
<h3 id="references">References:</h3>
<p><a href="http://www.rapidtables.com/code/linux/gcc.htm">http://www.rapidtables.com/code/linux/gcc.htm</a></p>
<p><a href="http://manned.org/pkg-config.1">http://manned.org/pkg-config.1</a></p>
<p><a href="https://en.wikipedia.org/wiki/Rpath">https://en.wikipedia.org/wiki/Rpath</a></p>
<p><a href="http://www.cmake.org/documentation/">http://www.cmake.org/documentation/</a></p>

      </div><!-- /.entry-content -->
      <div class="comments">
        <h2>Comments</h2>
        <div id="disqus_thread"></div>
        <script type="text/javascript">
          var disqus_identifier = "c-link-and-library-usage.html";
          (function() {
          var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
          dsq.src = '//junfeng.disqus.com/embed.js';
          (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
          })();
        </script>
      </div>

    </article>
  </section>
</div>
            </div>
        </div>
    </div>

    <footer id="site-footer">
        <div class="row-fluid">
            <div class="span10 offset1">
                <address>
                    <p>
                        UI Designed By <a href="http://github.com/jsliang/pelican-fresh/">Fresh</a>
                    </p>
                </address>
            </div>
        </div>
    </footer>

<script type="text/javascript">
    var disqus_shortname = 'junfeng';
    (function () {
        var s = document.createElement('script'); s.async = true;
        s.type = 'text/javascript';
        s.src = '//' + disqus_shortname + '.disqus.com/count.js';
        (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
    }());
</script>
    <script src="http://junfenglx.github.io/theme/js/jquery.min.js"></script>
    <script src="http://junfenglx.github.io/theme/js/bootstrap.min.js"></script>
    <script src="http://junfenglx.github.io/theme/js/jquery.cookie.js"></script>
    <!--script src="http://junfenglx.github.io/theme/js/analyse.js"></script -->
</body>
</html>